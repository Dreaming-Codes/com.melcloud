{
    "id": "com.mecloud",
    "sdk": 2,
    "brandColor": "#ed0c13",
    "name": {
        "en": "MelCloud"
    },
    "description": {
        "en": "Integrate MelCloud into Homey"
     },
    "category": [
        "tools",
        "appliances"
    ],
	  "version": "1.5.2",
    "compatibility": ">=2.1.2",
    "tags": {
        "en": [
            "Aircon",
            "MelCloud",
            "Mitsubishi",
            "Heatpump",
            "Ecodan"
        ]
     },
    "images": {
        "small": "/assets/images/small.png",
        "large": "/assets/images/large.png"
    },
    "author": {
        "name": "Gerard Ricart",
        "email": "gerard.ricart@gmail.com"
    },
    "bugs": {
      "url": "https://github.com/XattSPT/com.melcloud/issues"
    },
    "source": "https://github.com/XattSPT/com.melcloud",
    "contributing": {
        "donate": {
            "paypal": {
                "username": "XattSPT"
            }
        }
    },
    "capabilities": {
        "mode_capability": {
            "type": "enum",
            "title": {
                "en": "Full Thermostat Mode"
            },
            "getable": true,
            "setable": true,
            "uiComponent": "picker",
            "uiQuickAction": true,
            "values": [
                {
                  "id": "off",
                  "title": {
                    "en": "Off"
                  }
                },
                {
                  "id": "heat",
                  "title": {
                    "en": "Heat"
                   }
                },
                {
                  "id": "dry",
                  "title": {
                    "en": "Dry"
                  }
                },
                {
                    "id": "cool",
                    "title": {
                      "en": "Cool"
                    }
                },
                {
                    "id": "fan",
                    "title": {
                      "en": "Fan"
                    }
                },
                {
                  "id": "auto",
                  "title": {
                    "en": "Auto"
                  }
                }
            ]
        },
        "vertical": {
            "type": "enum",
            "title": {
                "en": "Vertical Position"
            },
            "getable": true,
            "setable": true,
            "uiComponent": "picker",
            "uiQuickAction": true,
            "values": [
                {
                  "id": "auto",
                  "title": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "top",
                  "title": {
                    "en": "Top"
                   }
                },
                {
                  "id": "middletop",
                  "title": {
                    "en": "MiddleTop"
                  }
                },
                {
                    "id": "middle",
                    "title": {
                      "en": "Middle"
                    }
                },
                {
                    "id": "middlebottom",
                    "title": {
                      "en": "MiddleBotom"
                    }
                },
                {
                  "id": "bottom",
                  "title": {
                    "en": "Bottom"
                  }
                },
                {
                    "id": "swing",
                    "title": {
                      "en": "Swing"
                    }
                }
            ]
        },
        "horizontal": {
            "type": "enum",
            "title": {
                "en": "Horizontal Position"
            },
            "getable": true,
            "setable": true,
            "uiComponent": "picker",
            "uiQuickAction": true,
            "values": [
                {
                  "id": "auto",
                  "title": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "left",
                  "title": {
                    "en": "Left"
                   }
                },
                {
                  "id": "middleleft",
                  "title": {
                    "en": "MiddleLeft"
                  }
                },
                {
                    "id": "middle",
                    "title": {
                      "en": "Middle"
                    }
                },
                {
                    "id": "middleright",
                    "title": {
                      "en": "MiddleRight"
                    }
                },
                {
                  "id": "rigth",
                  "title": {
                    "en": "Right"
                  }
                },
                {
                    "id": "swing",
                    "title": {
                      "en": "Swing"
                    }
                }
            ]
        },
        "fan_power": {
            "type": "number",
            "title": {
              "en": "Fan Power"
            },
            "uiComponent": "slider",
            "getable": true,
            "setable": true,
            "units": {
              "en": ""
            },
            "min": 0,
            "max": 5,
            "step": 1
          },
        "forcedhotwater": {
            "type": "boolean",
            "title": {
              "en": "Forced Hot Water"
            },
            "uiComponent": "toggle",
            "getable": true,
            "setable": true,
            "units": {
              "en": ""
            },
            "uiQuickAction": false,
            "icon": "/assets/forcedwater.svg"
        },
        "watertank_temperature": {
          "type": "number",
          "title": {
            "en": "Water Tank Temperature"
          },
          "uiComponent": "sensor",
          "getable": true,
          "setable": false,
          "units": {
            "en": ""
          },
          "min": 0,
          "max": 100,
          "step": 1,
          "icon": "/assets/tanktemp.svg"
        }
    },
    "drivers": [
        {
            "id": "melcloud",
            "name": {
                "en": "MelCloud AC Device"
            },
            "images": {
                "small": "drivers/melcloud/assets/images/small.png",
                "large": "drivers/melcloud/assets/images/large.png"
            },
            "class": "thermostat",
            "capabilities": [
                "onoff",
                "mode_capability",
                "thermostat_mode",
                "target_temperature",
                "measure_temperature",
                "fan_power",
                "vertical",
                "horizontal"
            ],
            "capabilitiesOptions": {
              "thermostat_mode": {
                "title": {
                  "en": "Homekit Thermostat"
                }
              }
            },
            "pair": [
                {
                    "id": "start",
                    "template": "login_credentials",
                    "navigation": {
                        "next": "list_my_devices"
                    },
                    "options":{
                        "logo":"pair_logo.png",
                        "usernameLabel":"MelCloud account",
                        "usernamePlaceholder":"user@domain.com",
                        "passwordLabel":"Password",
                        "passwordPlaceholder":"P4ssw0rd"
                      }
                },
                {
                    "id": "list_my_devices",
                    "template": "list_devices",
                    "navigation": {
                        "next": "add_my_devices"
                    }
                },
                {
                    "id": "add_my_devices",
                    "template": "add_devices"
                }
            ],
            "settings": [
              {
                  "type": "group",
                  "label": {
                      "en": "Update device time"
                  },
                  "children": [
                      {
                          "id": "interval",
                          "type": "number",
                          "label": {
                              "en": "minutes"
                          },
                          "value": 15,
                          "min": 5,
                          "max": 60
                      }
                  ]
              }
          ]
        },
        {
          "id": "melcloudHP",
          "name": {
              "en": "MelCloud Heat Pump"
          },
          "images": {
              "small": "drivers/melcloudHP/assets/images/small.png",
              "large": "drivers/melcloudHP/assets/images/large.png"
          },
          "class": "thermostat",
          "capabilities": [
              "forcedhotwater",
              "onoff",
              "target_temperature",
              "measure_temperature",
              "watertank_temperature"
          ],
          "capabilitiesOptions": {
            "target_temperature": {
              "min": 10,
              "max": 30
            }
          },
          "pair": [
              {
                  "id": "start",
                  "template": "login_credentials",
                  "navigation": {
                      "next": "list_my_devices"
                  },
                  "options":{
                      "logo":"pair_logo.png",
                      "usernameLabel":"MelCloud account",
                      "usernamePlaceholder":"user@domain.com",
                      "passwordLabel":"Password",
                      "passwordPlaceholder":"P4ssw0rd"
                    }
              },
              {
                  "id": "list_my_devices",
                  "template": "list_devices",
                  "navigation": {
                      "next": "add_my_devices"
                  }
              },
              {
                  "id": "add_my_devices",
                  "template": "add_devices"
              }
          ],
          "settings": [
            {
                "type": "group",
                "label": {
                    "en": "Update device time"
                },
                "children": [
                    {
                        "id": "interval",
                        "type": "number",
                        "label": {
                            "en": "minutes"
                        },
                        "value": 15,
                        "min": 5,
                        "max": 60
                    }
                ]
            }
        ]
      }
    ],
    "flow": {
      "triggers": [
        {
          "id": "Full_Thermostat_Trigger",
          "title": {
            "en": "Full thermostat mode has changed to"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "mode_capability_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "off",
                  "label": {
                    "en": "Off"
                  }
                },
                {
                  "id": "heat",
                  "label": {
                    "en": "Heat"
                   }
                },
                {
                  "id": "dry",
                  "label": {
                    "en": "Dry"
                  }
                },
                {
                    "id": "cool",
                    "label": {
                      "en": "Cool"
                    }
                },
                {
                    "id": "fan",
                    "label": {
                      "en": "Fan"
                    }
                },
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Fan_Speed_Trigger",
          "title": {
            "en": "The fan speed has changed to"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "fan_speed_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "0",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "1",
                  "label": {
                    "en": "Very Slow"
                   }
                },
                {
                  "id": "2",
                  "label": {
                    "en": "Slow"
                  }
                },
                {
                    "id": "3",
                    "label": {
                      "en": "Medium"
                    }
                },
                {
                    "id": "4",
                    "label": {
                      "en": "High"
                    }
                },
                {
                  "id": "5",
                  "label": {
                    "en": "Very High"
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Vertical_Swing_Trigger",
          "title": {
            "en": "The vertical swing has changed to"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "vertical_swing_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "top",
                  "label": {
                    "en": "Top"
                   }
                },
                {
                  "id": "middletop",
                  "label": {
                    "en": "MiddleTop"
                  }
                },
                {
                    "id": "middle",
                    "label": {
                      "en": "Middle"
                    }
                },
                {
                    "id": "middlebottom",
                    "label": {
                      "en": "MiddleBotom"
                    }
                },
                {
                  "id": "bottom",
                  "label": {
                    "en": "Bottom"
                  }
                },
                {
                    "id": "swing",
                    "label": {
                      "en": "Swing"
                    }
                }
              ]
            }
          ]
        },
        {
          "id": "Horizontal_Swing_Trigger",
          "title": {
            "en": "The horizontal swing has changed to"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "horizontal_swing_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "left",
                  "label": {
                    "en": "Left"
                   }
                },
                {
                  "id": "middleleft",
                  "label": {
                    "en": "MiddleLeft"
                  }
                },
                {
                    "id": "middle",
                    "label": {
                      "en": "Middle"
                    }
                },
                {
                    "id": "middleright",
                    "label": {
                      "en": "MiddleRight"
                    }
                },
                {
                  "id": "rigth",
                  "label": {
                    "en": "Right"
                  }
                },
                {
                    "id": "swing",
                    "label": {
                      "en": "Swing"
                    }
                }
              ]
            }
          ]
        },
        {
          "id": "Forced_Water_Trigger",
          "title": {
            "en": "Forced Hot Water has changed to"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloudHP"
            },
            {
              "name": "forced_hot_water_trigger",
              "type": "dropdown",
              "values": [
                {
                  "id": "true",
                  "label": {
                    "en": "On"
                  }
                },
                {
                  "id": "false",
                  "label": {
                    "en": "Auto"
                   }
                }
              ]
            }
          ]
        }
      ],
      "actions": [
        {
          "id": "Full_Thermostat_Action",
          "title": {
            "en": "Set full mode"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "mode_capability_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "off",
                  "label": {
                    "en": "Off"
                  }
                },
                {
                  "id": "heat",
                  "label": {
                    "en": "Heat"
                   }
                },
                {
                  "id": "dry",
                  "label": {
                    "en": "Dry"
                  }
                },
                {
                    "id": "cool",
                    "label": {
                      "en": "Cool"
                    }
                },
                {
                    "id": "fan",
                    "label": {
                      "en": "Fan"
                    }
                },
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Fan_Speed_Action",
          "title": {
            "en": "Set fan speed"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "fan_speed_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "0",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "1",
                  "label": {
                    "en": "Very Slow"
                   }
                },
                {
                  "id": "2",
                  "label": {
                    "en": "Slow"
                  }
                },
                {
                    "id": "3",
                    "label": {
                      "en": "Medium"
                    }
                },
                {
                    "id": "4",
                    "label": {
                      "en": "High"
                    }
                },
                {
                  "id": "5",
                  "label": {
                    "en": "Very High"
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Vertical_Swing_Action",
          "title": {
            "en": "Set vertical swing"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "vertical_swing_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "top",
                  "label": {
                    "en": "Top"
                   }
                },
                {
                  "id": "middletop",
                  "label": {
                    "en": "MiddleTop"
                  }
                },
                {
                    "id": "middle",
                    "label": {
                      "en": "Middle"
                    }
                },
                {
                    "id": "middlebottom",
                    "label": {
                      "en": "MiddleBotom"
                    }
                },
                {
                  "id": "bottom",
                  "label": {
                    "en": "Bottom"
                  }
                },
                {
                    "id": "swing",
                    "label": {
                      "en": "Swing"
                    }
                }
              ]
            }
          ]
        },
        {
          "id": "Horizontal_Swing_Action",
          "title": {
            "en": "Set horizontal swing"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "horizontal_swing_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "left",
                  "label": {
                    "en": "Left"
                   }
                },
                {
                  "id": "middleleft",
                  "label": {
                    "en": "MiddleLeft"
                  }
                },
                {
                    "id": "middle",
                    "label": {
                      "en": "Middle"
                    }
                },
                {
                    "id": "middleright",
                    "label": {
                      "en": "MiddleRight"
                    }
                },
                {
                  "id": "rigth",
                  "label": {
                    "en": "Right"
                  }
                },
                {
                    "id": "swing",
                    "label": {
                      "en": "Swing"
                    }
                }
              ]
            }
          ]
        },
        {
          "id": "Forced_Hot_Water_Action",
          "title": {
            "en": "Set Forced Hot Water"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloudHP"
            },
            {
              "name": "forced_hot_water_action",
              "type": "dropdown",
              "values": [
                {
                  "id": "true",
                  "label": {
                    "en": "On"
                  }
                },
                {
                  "id": "false",
                  "label": {
                    "en": "Auto"
                   }
                }
              ]
            }
          ]
        }
      ],
      "conditions": [
        {
          "id": "Full_Thermostat_Condition",
          "title": {
            "en": "Full thermostastat mode is !{{equals|does not equal}}"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "mode_capability_condition",
              "type": "dropdown",
              "values": [
                {
                  "id": "off",
                  "label": {
                    "en": "Off"
                  }
                },
                {
                  "id": "heat",
                  "label": {
                    "en": "Heat"
                   }
                },
                {
                  "id": "dry",
                  "label": {
                    "en": "Dry"
                  }
                },
                {
                    "id": "cool",
                    "label": {
                      "en": "Cool"
                    }
                },
                {
                    "id": "fan",
                    "label": {
                      "en": "Fan"
                    }
                },
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Fan_Speed_Condition",
          "title": {
            "en": "Fan speed is !{{equals|does not equal}}"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "fan_speed_conditioon",
              "type": "dropdown",
              "values": [
                {
                  "id": "0",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "1",
                  "label": {
                    "en": "Very Slow"
                   }
                },
                {
                  "id": "2",
                  "label": {
                    "en": "Slow"
                  }
                },
                {
                    "id": "3",
                    "label": {
                      "en": "Medium"
                    }
                },
                {
                    "id": "4",
                    "label": {
                      "en": "High"
                    }
                },
                {
                  "id": "5",
                  "label": {
                    "en": "Very High"
                  }
                }
              ]
            }
          ]
        },
        {
          "id": "Vertical_Swing_Condition",
          "title": {
            "en": "Vertical swing is !{{equals|does not equal}}"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "vertical_swing_condition",
              "type": "dropdown",
              "values": [
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "top",
                  "label": {
                    "en": "Top"
                   }
                },
                {
                  "id": "middletop",
                  "label": {
                    "en": "MiddleTop"
                  }
                },
                {
                    "id": "middle",
                    "label": {
                      "en": "Middle"
                    }
                },
                {
                    "id": "middlebottom",
                    "label": {
                      "en": "MiddleBotom"
                    }
                },
                {
                  "id": "bottom",
                  "label": {
                    "en": "Bottom"
                  }
                },
                {
                    "id": "swing",
                    "label": {
                      "en": "Swing"
                    }
                }
              ]
            }
          ]
        },
        {
          "id": "Horizontal_Swing_Condition",
          "title": {
            "en": "Horizontal swing is !{{equals|does not equal}}"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloud"
            },
            {
              "name": "horizontal_swing_condition",
              "type": "dropdown",
              "values": [
                {
                  "id": "auto",
                  "label": {
                    "en": "Auto"
                  }
                },
                {
                  "id": "left",
                  "label": {
                    "en": "Left"
                   }
                },
                {
                  "id": "middleleft",
                  "label": {
                    "en": "MiddleLeft"
                  }
                },
                {
                    "id": "middle",
                    "label": {
                      "en": "Middle"
                    }
                },
                {
                    "id": "middleright",
                    "label": {
                      "en": "MiddleRight"
                    }
                },
                {
                  "id": "rigth",
                  "label": {
                    "en": "Right"
                  }
                },
                {
                    "id": "swing",
                    "label": {
                      "en": "Swing"
                    }
                }
              ]
            }
          ]
        },
        {
          "id": "Forced_Hot_Water_Condition",
          "title": {
            "en": "Forced Hot Water is !{{equals|does not equal}}"
          },
          "args": [
            {
              "type": "device",
              "name": "device",
              "filter": "driver_id=melcloudHP"
            },
            {
              "name": "forced_hot_water_condition",
              "type": "dropdown",
              "values": [
                {
                  "id": "true",
                  "label": {
                    "en": "On"
                  }
                },
                {
                  "id": "false",
                  "label": {
                    "en": "Auto"
                   }
                }
              ]
            }
          ]
        }
      ]
    }
}
